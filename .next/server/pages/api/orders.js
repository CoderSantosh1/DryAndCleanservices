"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/orders";
exports.ids = ["pages/api/orders"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Forders&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Corders.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Forders&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Corders.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_orders_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\orders.ts */ \"(api)/./pages/api/orders.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_orders_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_orders_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/orders\",\n        pathname: \"/api/orders\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_orders_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm9yZGVycyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDb3JkZXJzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2RyeS1jbGVhbi1zdGFydGVyLz9iNDhiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcb3JkZXJzLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb3JkZXJzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvb3JkZXJzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Forders&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Corders.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/dbConnect.ts":
/*!**************************!*\
  !*** ./lib/dbConnect.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ connectDB)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n// lib/dbConnect.ts\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"❌ Please add MONGODB_URI in .env.local file\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (cached.conn) return cached.conn;\n    if (!cached.promise) {\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI).then((mongoose)=>{\n            console.log(\"✅ MongoDB connected\");\n            return mongoose;\n        });\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGJDb25uZWN0LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLG1CQUFtQjtBQUNhO0FBRWhDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUUzQyxJQUFJLENBQUNBLGFBQWE7SUFDaEIsTUFBTSxJQUFJRyxNQUFNO0FBQ2xCO0FBRUEsSUFBSUMsU0FBUyxPQUFnQkwsUUFBUTtBQUVyQyxJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBUyxPQUFnQkwsUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ2xFO0FBRWUsZUFBZUM7SUFDNUIsSUFBSUosT0FBT0UsSUFBSSxFQUFFLE9BQU9GLE9BQU9FLElBQUk7SUFFbkMsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkJILE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWFVLElBQUksQ0FBQyxDQUFDWDtZQUNuRFksUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT2I7UUFDVDtJQUNGO0lBRUFLLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO0lBQ2xDLE9BQU9ILE9BQU9FLElBQUk7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jZHJ5LWNsZWFuLXN0YXJ0ZXIvLi9saWIvZGJDb25uZWN0LnRzP2M4ODMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2RiQ29ubmVjdC50c1xyXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIGFzIHN0cmluZztcclxuXHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXCLinYwgUGxlYXNlIGFkZCBNT05HT0RCX1VSSSBpbiAuZW52LmxvY2FsIGZpbGVcIik7XHJcbn1cclxuXHJcbmxldCBjYWNoZWQgPSAoZ2xvYmFsIGFzIGFueSkubW9uZ29vc2U7XHJcblxyXG5pZiAoIWNhY2hlZCkge1xyXG4gIGNhY2hlZCA9IChnbG9iYWwgYXMgYW55KS5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBjb25uZWN0REIoKSB7XHJcbiAgaWYgKGNhY2hlZC5jb25uKSByZXR1cm4gY2FjaGVkLmNvbm47XHJcblxyXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSkudGhlbigobW9uZ29vc2UpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCLinIUgTW9uZ29EQiBjb25uZWN0ZWRcIik7XHJcbiAgICAgIHJldHVybiBtb25nb29zZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbn1cclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJjYWNoZWQiLCJnbG9iYWwiLCJjb25uIiwicHJvbWlzZSIsImNvbm5lY3REQiIsImNvbm5lY3QiLCJ0aGVuIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/dbConnect.ts\n");

/***/ }),

/***/ "(api)/./models/Order.ts":
/*!*************************!*\
  !*** ./models/Order.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n// models/Order.ts\n\nconst OrderSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    customerName: {\n        type: String\n    },\n    phone: {\n        type: String\n    },\n    address: {\n        type: String\n    },\n    cleanerId: {\n        type: String,\n        default: null\n    },\n    status: {\n        type: String,\n        enum: [\n            \"created\",\n            \"assigned\",\n            \"picked\",\n            \"in_transit\",\n            \"completed\",\n            \"cancelled\"\n        ],\n        default: \"created\"\n    },\n    assignedTo: {\n        type: String,\n        default: null\n    },\n    items: {\n        type: [\n            String\n        ],\n        default: []\n    }\n}, {\n    timestamps: true\n});\n// Avoid recompiling model in dev/hot-reload\nconst Order = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Order || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Order\", OrderSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Order);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvT3JkZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsa0JBQWtCO0FBQzJDO0FBd0I3RCxNQUFNRSxjQUFjLElBQUlELDRDQUFNQSxDQUM1QjtJQUNFRSxjQUFjO1FBQUVDLE1BQU1DO0lBQU87SUFDN0JDLE9BQU87UUFBRUYsTUFBTUM7SUFBTztJQUN0QkUsU0FBUztRQUFFSCxNQUFNQztJQUFPO0lBQ3hCRyxXQUFXO1FBQUVKLE1BQU1DO1FBQVFJLFNBQVM7SUFBSztJQUN6Q0MsUUFBUTtRQUNOTixNQUFNQztRQUNOTSxNQUFNO1lBQ0o7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREYsU0FBUztJQUNYO0lBQ0FHLFlBQVk7UUFBRVIsTUFBTUM7UUFBUUksU0FBUztJQUFLO0lBQzFDSSxPQUFPO1FBQUVULE1BQU07WUFBQ0M7U0FBTztRQUFFSSxTQUFTLEVBQUU7SUFBQztBQUN2QyxHQUNBO0lBQUVLLFlBQVk7QUFBSztBQUdyQiw0Q0FBNEM7QUFDNUMsTUFBTUMsUUFDSix3REFBZ0IsQ0FBQ0EsS0FBSyxJQUN0QmYscURBQWMsQ0FBVyxTQUFTRTtBQUVwQyxpRUFBZWEsS0FBS0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NkcnktY2xlYW4tc3RhcnRlci8uL21vZGVscy9PcmRlci50cz9iNDAzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1vZGVscy9PcmRlci50c1xyXG5pbXBvcnQgbW9uZ29vc2UsIHsgRG9jdW1lbnQsIE1vZGVsLCBTY2hlbWEgfSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbmV4cG9ydCB0eXBlIE9yZGVyU3RhdHVzID1cclxuICB8IFwiY3JlYXRlZFwiXHJcbiAgfCBcImFzc2lnbmVkXCJcclxuICB8IFwicGlja2VkXCJcclxuICB8IFwiaW5fdHJhbnNpdFwiXHJcbiAgfCBcImNvbXBsZXRlZFwiXHJcbiAgfCBcImNhbmNlbGxlZFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJT3JkZXIge1xyXG4gIGN1c3RvbWVyTmFtZT86IHN0cmluZztcclxuICBwaG9uZT86IHN0cmluZztcclxuICBhZGRyZXNzPzogc3RyaW5nO1xyXG4gIGNsZWFuZXJJZD86IHN0cmluZyB8IG51bGw7XHJcbiAgc3RhdHVzOiBPcmRlclN0YXR1cztcclxuICBhc3NpZ25lZFRvPzogc3RyaW5nIHwgbnVsbDtcclxuICBpdGVtczogc3RyaW5nW107XHJcbiAgY3JlYXRlZEF0PzogRGF0ZTtcclxuICB1cGRhdGVkQXQ/OiBEYXRlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE9yZGVyRG9jIGV4dGVuZHMgSU9yZGVyLCBEb2N1bWVudCB7fVxyXG5cclxuY29uc3QgT3JkZXJTY2hlbWEgPSBuZXcgU2NoZW1hPE9yZGVyRG9jPihcclxuICB7XHJcbiAgICBjdXN0b21lck5hbWU6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICBwaG9uZTogeyB0eXBlOiBTdHJpbmcgfSxcclxuICAgIGFkZHJlc3M6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICBjbGVhbmVySWQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBudWxsIH0sXHJcbiAgICBzdGF0dXM6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICBlbnVtOiBbXHJcbiAgICAgICAgXCJjcmVhdGVkXCIsXHJcbiAgICAgICAgXCJhc3NpZ25lZFwiLFxyXG4gICAgICAgIFwicGlja2VkXCIsXHJcbiAgICAgICAgXCJpbl90cmFuc2l0XCIsXHJcbiAgICAgICAgXCJjb21wbGV0ZWRcIixcclxuICAgICAgICBcImNhbmNlbGxlZFwiLFxyXG4gICAgICBdLFxyXG4gICAgICBkZWZhdWx0OiBcImNyZWF0ZWRcIixcclxuICAgIH0sXHJcbiAgICBhc3NpZ25lZFRvOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogbnVsbCB9LFxyXG4gICAgaXRlbXM6IHsgdHlwZTogW1N0cmluZ10sIGRlZmF1bHQ6IFtdIH0sXHJcbiAgfSxcclxuICB7IHRpbWVzdGFtcHM6IHRydWUgfVxyXG4pO1xyXG5cclxuLy8gQXZvaWQgcmVjb21waWxpbmcgbW9kZWwgaW4gZGV2L2hvdC1yZWxvYWRcclxuY29uc3QgT3JkZXI6IE1vZGVsPE9yZGVyRG9jPiA9XHJcbiAgKG1vbmdvb3NlLm1vZGVscy5PcmRlciBhcyBNb2RlbDxPcmRlckRvYz4pIHx8XHJcbiAgbW9uZ29vc2UubW9kZWw8T3JkZXJEb2M+KFwiT3JkZXJcIiwgT3JkZXJTY2hlbWEpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgT3JkZXI7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIk9yZGVyU2NoZW1hIiwiY3VzdG9tZXJOYW1lIiwidHlwZSIsIlN0cmluZyIsInBob25lIiwiYWRkcmVzcyIsImNsZWFuZXJJZCIsImRlZmF1bHQiLCJzdGF0dXMiLCJlbnVtIiwiYXNzaWduZWRUbyIsIml0ZW1zIiwidGltZXN0YW1wcyIsIk9yZGVyIiwibW9kZWxzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/Order.ts\n");

/***/ }),

/***/ "(api)/./pages/api/orders.ts":
/*!*****************************!*\
  !*** ./pages/api/orders.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_dbConnect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/dbConnect */ \"(api)/./lib/dbConnect.ts\");\n/* harmony import */ var _models_Order__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/Order */ \"(api)/./models/Order.ts\");\n// pages/api/orders.ts\n\n\nasync function handler(req, res) {\n    await (0,_lib_dbConnect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n    const method = req.method;\n    try {\n        if (method === \"GET\") {\n            const orders = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find().sort({\n                createdAt: -1\n            });\n            return res.status(200).json(orders);\n        }\n        if (method === \"POST\") {\n            const body = req.body;\n            if (!body.customerName || !body.phone || !body.address) {\n                return res.status(400).json({\n                    error: \"customerName, phone and address are required\"\n                });\n            }\n            const newOrder = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create({\n                customerName: body.customerName,\n                phone: body.phone,\n                address: body.address,\n                cleanerId: body.cleanerId ?? null,\n                items: body.items ?? []\n            });\n            return res.status(201).json(newOrder);\n        }\n        if (method === \"PATCH\") {\n            const { id, action, assignedTo, status } = req.body;\n            if (!id) return res.status(400).json({\n                error: \"Order id is required for PATCH\"\n            });\n            const order = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id);\n            if (!order) return res.status(404).json({\n                error: \"Order not found\"\n            });\n            if (action === \"assign\") {\n                order.assignedTo = assignedTo ?? null;\n                if (assignedTo) order.status = \"assigned\";\n            } else if (action === \"status\" && status) {\n                const allowed = [\n                    \"created\",\n                    \"assigned\",\n                    \"picked\",\n                    \"in_transit\",\n                    \"completed\",\n                    \"cancelled\"\n                ];\n                if (!allowed.includes(status)) {\n                    return res.status(400).json({\n                        error: \"Invalid status value\"\n                    });\n                }\n                order.status = status;\n            } else {\n                return res.status(400).json({\n                    error: \"Invalid action for PATCH\"\n                });\n            }\n            await order.save();\n            return res.status(200).json(order);\n        }\n        res.setHeader(\"Allow\", [\n            \"GET\",\n            \"POST\",\n            \"PATCH\"\n        ]);\n        return res.status(405).end(`Method ${method} Not Allowed`);\n    } catch (err) {\n        console.error(\"orders api error:\", err);\n        return res.status(500).json({\n            error: err.message || \"Server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyI6WyJ3ZWJwYWNrOi8vY2RyeS1jbGVhbi1zdGFydGVyLy4vcGFnZXMvYXBpL29yZGVycy50cz81ZDgwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9vcmRlcnMudHNcbmltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgY29ubmVjdERCIGZyb20gXCJAL2xpYi9kYkNvbm5lY3RcIjtcbmltcG9ydCBPcmRlciwgeyBPcmRlckRvYywgT3JkZXJTdGF0dXMgfSBmcm9tIFwiQC9tb2RlbHMvT3JkZXJcIjtcblxudHlwZSBFcnJvclJlc3BvbnNlID0geyBlcnJvcjogc3RyaW5nIH07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPE9yZGVyRG9jW10gfCBFcnJvclJlc3BvbnNlIHwgT3JkZXJEb2M+XG4pIHtcbiAgYXdhaXQgY29ubmVjdERCKCk7XG5cbiAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZDtcblxuICB0cnkge1xuICAgIGlmIChtZXRob2QgPT09IFwiR0VUXCIpIHtcbiAgICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IE9yZGVyLmZpbmQoKS5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihvcmRlcnMpO1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgPT09IFwiUE9TVFwiKSB7XG4gICAgICBjb25zdCBib2R5ID0gcmVxLmJvZHkgYXMgUGFydGlhbDxPcmRlckRvYz47XG4gICAgICBpZiAoIWJvZHkuY3VzdG9tZXJOYW1lIHx8ICFib2R5LnBob25lIHx8ICFib2R5LmFkZHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgICAgIC5qc29uKHsgZXJyb3I6IFwiY3VzdG9tZXJOYW1lLCBwaG9uZSBhbmQgYWRkcmVzcyBhcmUgcmVxdWlyZWRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5ld09yZGVyID0gYXdhaXQgT3JkZXIuY3JlYXRlKHtcbiAgICAgICAgY3VzdG9tZXJOYW1lOiBib2R5LmN1c3RvbWVyTmFtZSxcbiAgICAgICAgcGhvbmU6IGJvZHkucGhvbmUsXG4gICAgICAgIGFkZHJlc3M6IGJvZHkuYWRkcmVzcyxcbiAgICAgICAgY2xlYW5lcklkOiBib2R5LmNsZWFuZXJJZCA/PyBudWxsLFxuICAgICAgICBpdGVtczogYm9keS5pdGVtcyA/PyBbXSxcbiAgICAgIH0gYXMgUGFydGlhbDxPcmRlckRvYz4pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKG5ld09yZGVyKTtcbiAgICB9XG5cbiAgICBpZiAobWV0aG9kID09PSBcIlBBVENIXCIpIHtcbiAgICAgIGNvbnN0IHsgaWQsIGFjdGlvbiwgYXNzaWduZWRUbywgc3RhdHVzIH0gPSByZXEuYm9keSBhcyBhbnk7XG4gICAgICBpZiAoIWlkKVxuICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgLnN0YXR1cyg0MDApXG4gICAgICAgICAgLmpzb24oeyBlcnJvcjogXCJPcmRlciBpZCBpcyByZXF1aXJlZCBmb3IgUEFUQ0hcIiB9KTtcblxuICAgICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChpZCk7XG4gICAgICBpZiAoIW9yZGVyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJPcmRlciBub3QgZm91bmRcIiB9KTtcblxuICAgICAgaWYgKGFjdGlvbiA9PT0gXCJhc3NpZ25cIikge1xuICAgICAgICBvcmRlci5hc3NpZ25lZFRvID0gYXNzaWduZWRUbyA/PyBudWxsO1xuICAgICAgICBpZiAoYXNzaWduZWRUbykgb3JkZXIuc3RhdHVzID0gXCJhc3NpZ25lZFwiO1xuICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwic3RhdHVzXCIgJiYgc3RhdHVzKSB7XG4gICAgICAgIGNvbnN0IGFsbG93ZWQ6IE9yZGVyU3RhdHVzW10gPSBbXG4gICAgICAgICAgXCJjcmVhdGVkXCIsXG4gICAgICAgICAgXCJhc3NpZ25lZFwiLFxuICAgICAgICAgIFwicGlja2VkXCIsXG4gICAgICAgICAgXCJpbl90cmFuc2l0XCIsXG4gICAgICAgICAgXCJjb21wbGV0ZWRcIixcbiAgICAgICAgICBcImNhbmNlbGxlZFwiLFxuICAgICAgICBdO1xuICAgICAgICBpZiAoIWFsbG93ZWQuaW5jbHVkZXMoc3RhdHVzKSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgc3RhdHVzIHZhbHVlXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgb3JkZXIuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBhY3Rpb24gZm9yIFBBVENIXCIgfSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IG9yZGVyLnNhdmUoKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihvcmRlcik7XG4gICAgfVxuXG4gICAgcmVzLnNldEhlYWRlcihcIkFsbG93XCIsIFtcIkdFVFwiLCBcIlBPU1RcIiwgXCJQQVRDSFwiXSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke21ldGhvZH0gTm90IEFsbG93ZWRgKTtcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwib3JkZXJzIGFwaSBlcnJvcjpcIiwgZXJyKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfHwgXCJTZXJ2ZXIgZXJyb3JcIiB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbm5lY3REQiIsIk9yZGVyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsIm9yZGVycyIsImZpbmQiLCJzb3J0IiwiY3JlYXRlZEF0Iiwic3RhdHVzIiwianNvbiIsImJvZHkiLCJjdXN0b21lck5hbWUiLCJwaG9uZSIsImFkZHJlc3MiLCJlcnJvciIsIm5ld09yZGVyIiwiY3JlYXRlIiwiY2xlYW5lcklkIiwiaXRlbXMiLCJpZCIsImFjdGlvbiIsImFzc2lnbmVkVG8iLCJvcmRlciIsImZpbmRCeUlkIiwiYWxsb3dlZCIsImluY2x1ZGVzIiwic2F2ZSIsInNldEhlYWRlciIsImVuZCIsImVyciIsImNvbnNvbGUiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/orders.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Forders&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Corders.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();