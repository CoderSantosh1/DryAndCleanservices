(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{926:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/delivery",function(){return a(6781)}])},9595:function(e,t){"use strict";t.Z={src:"/_next/static/media/tide.f7ee2ce8.png",height:225,width:225,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAWlBMVEX///////7///3+//////z///v///r//v7+/v/+/v7+/f39/f79/Pz8/P35+vz4+Pr18e7/7Nzr6ODe4Onh3uPb3Ofh2t/g09XD2t/a08XT0NjR0NnQzNaz1uFXaTgPAAAAPklEQVR42hXHxxGAMBAEwYETcIv3XvmnqVL/GiGgMBDqO29wEe85l3J9FloYtvM6RkD7+/0TiFBXAYHMzEUCTRUCNAkNPUEAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},9141:function(e,t,a){"use strict";a.d(t,{Z:function(){return AdminGuard}});var s=a(5893),i=a(7294),n=a(1163);function AdminGuard(e){let{children:t}=e,a=(0,n.useRouter)(),[l,r]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=localStorage.getItem("admin_user");e?r(!0):a.replace("/admin/login")},[a]),l)?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)("div",{className:"flex h-screen items-center justify-center text-gray-500",children:"Checking admin access…"})}},8755:function(e,t,a){"use strict";a.d(t,{Z:function(){return Layout}});var s=a(5893),i=a(7294),n=a(1664),l=a.n(n),r=a(1352),c=a(7232),d=a(5675),o=a.n(d),h=a(9595);function Header(e){let{title:t="Tidee Services"}=e,[a,n]=(0,i.useState)(!1);return(0,s.jsxs)("header",{className:"bg-white border-b shadow-sm sticky top-0 z-50",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(l(),{href:"/",className:"flex items-center gap-2",children:[(0,s.jsx)(o(),{src:h.Z,alt:"Tidee Services Logo",className:"w-8 h-8 rounded-full"}),(0,s.jsx)("span",{className:"text-lg font-semibold text-indigo-700 tracking-wide",children:"Tidee Services Noida"})]})}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center gap-6 text-sm font-medium",children:[(0,s.jsx)(l(),{href:"/",className:"text-gray-700 hover:text-indigo-600",children:"Home"}),(0,s.jsx)(l(),{href:"/services",className:"text-gray-700 hover:text-indigo-600",children:"Services"}),(0,s.jsx)(l(),{href:"/about",className:"text-gray-700 hover:text-indigo-600",children:"About"}),(0,s.jsx)(l(),{href:"/contact",className:"text-gray-700 hover:text-indigo-600",children:"Contact"}),(0,s.jsx)(l(),{href:"/delivery",className:"text-indigo-600 border border-indigo-600 px-3 py-1.5 rounded-md hover:bg-indigo-600 hover:text-white transition",children:"Delevery"})]}),(0,s.jsx)("button",{onClick:()=>n(!a),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition","aria-label":"Toggle menu",children:a?(0,s.jsx)(r.Z,{size:22}):(0,s.jsx)(c.Z,{size:22})})]}),a&&(0,s.jsx)("div",{className:"md:hidden border-t bg-white",children:(0,s.jsxs)("nav",{className:"flex flex-col space-y-2 p-4 text-sm",children:[(0,s.jsx)(l(),{href:"/",className:"block py-2 text-gray-700 hover:text-indigo-600",onClick:()=>n(!1),children:"Home"}),(0,s.jsx)(l(),{href:"/services",className:"block py-2 text-gray-700 hover:text-indigo-600",onClick:()=>n(!1),children:"Services"}),(0,s.jsx)(l(),{href:"/pricing",className:"block py-2 text-gray-700 hover:text-indigo-600",onClick:()=>n(!1),children:"Pricing"}),(0,s.jsx)(l(),{href:"/about",className:"block py-2 text-gray-700 hover:text-indigo-600",onClick:()=>n(!1),children:"About"}),(0,s.jsx)(l(),{href:"/contact",className:"block py-2 text-gray-700 hover:text-indigo-600",onClick:()=>n(!1),children:"Contact"})]})})]})}function Layout(e){let{children:t,title:a}=e;return(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(Header,{title:a}),(0,s.jsx)("main",{children:t})]})}},6781:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AdminDelivery}});var s=a(5893),i=a(7294),n=a(9141),l=a(8755);function AdminDelivery(){let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),[o,h]=(0,i.useState)(null),[x,m]=(0,i.useState)({name:"",phone:"",vehicle:"",active:!0}),[u,v]=(0,i.useState)(!1);async function load(){r(!0);try{let e=await fetch("/api/delivery");if(!e.ok)throw Error(await e.text());let a=await e.json();t(a)}catch(e){console.error(e),d((null==e?void 0:e.message)||"Failed to load")}finally{r(!1)}}function startAdd(){h(null),m({name:"",phone:"",vehicle:"",active:!0})}function startEdit(e){h(e._id),m({name:e.name||"",phone:e.phone||"",vehicle:e.vehicle||"",active:!!e.active}),window.scrollTo({top:0,behavior:"smooth"})}async function handleSave(e){if(e&&e.preventDefault(),!x.name.trim())return alert("Name is required");v(!0);try{if(o){let e=await fetch("/api/delivery/".concat(o),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!e.ok)throw Error(await e.text());let a=await e.json();t(e=>e.map(e=>e._id===a._id?a:e)),h(null)}else{let e=await fetch("/api/delivery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!e.ok)throw Error(await e.text());let a=await e.json();t(e=>[a,...e]),m({name:"",phone:"",vehicle:"",active:!0})}}catch(e){console.error(e),alert("Save failed: "+((null==e?void 0:e.message)||""))}finally{v(!1)}}async function handleDelete(e){if(confirm("Delete this delivery partner?"))try{let a=await fetch("/api/delivery/".concat(e),{method:"DELETE"});if(!a.ok)throw Error(await a.text());t(t=>t.filter(t=>t._id!==e))}catch(e){console.error(e),alert("Delete failed: "+((null==e?void 0:e.message)||""))}}return(0,i.useEffect)(()=>{load()},[]),(0,s.jsx)(n.Z,{children:(0,s.jsx)(l.Z,{title:"Admin • Delivery Partners",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto py-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Delivery Partners"}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:startAdd,className:"px-3 py-1 bg-indigo-600 text-white rounded shadow",children:"+ New Partner"})})]}),(0,s.jsx)("div",{className:"mt-6 bg-white p-4 rounded shadow",children:(0,s.jsxs)("form",{onSubmit:e=>handleSave(e),className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600",children:"Name"}),(0,s.jsx)("input",{value:x.name,onChange:e=>m({...x,name:e.target.value}),className:"w-full border px-2 py-2 rounded"})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600",children:"Phone"}),(0,s.jsx)("input",{value:x.phone,onChange:e=>m({...x,phone:e.target.value}),className:"w-full border px-2 py-2 rounded"})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600",children:"Vehicle"}),(0,s.jsx)("input",{value:x.vehicle,onChange:e=>m({...x,vehicle:e.target.value}),className:"w-full border px-2 py-2 rounded"})]}),(0,s.jsxs)("div",{className:"md:col-span-1 flex gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 block",children:"Active"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:x.active,onChange:e=>m({...x,active:e.target.checked}),className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm",children:"Active"})]})})]}),(0,s.jsx)("div",{className:"ml-auto",children:(0,s.jsx)("button",{type:"submit",disabled:u,className:"px-3 py-2 bg-green-600 text-white rounded",children:u?"Saving…":o?"Update":"Create"})})]})]})}),(0,s.jsxs)("div",{className:"mt-6",children:[a&&(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Loading…"}),!a&&0===e.length&&(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No partners yet"}),(0,s.jsx)("div",{className:"mt-3 space-y-3",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white p-3 rounded shadow flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.name," ",e.active?(0,s.jsx)("span",{className:"text-xs text-green-600 ml-2",children:"(Active)"}):(0,s.jsx)("span",{className:"text-xs text-red-500 ml-2",children:"(Inactive)"})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.phone," ",e.vehicle?"• ".concat(e.vehicle):""]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["ID: ",e._id]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>startEdit(e),className:"px-3 py-1 border rounded",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>handleDelete(e._id),className:"px-3 py-1 border text-red-600 rounded",children:"Delete"})]})]},e._id))})]})]})})})}},1163:function(e,t,a){e.exports=a(9974)}},function(e){e.O(0,[664,763,774,888,179],function(){return e(e.s=926)}),_N_E=e.O()}]);